<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lumen Office RPG</title>

<style>
body {
  font-family: "Courier New", monospace;
  background:#1e1e1e;
  color:#e0e0e0;
  margin:0;
}

.game-container {
  max-width:900px;
  margin:2rem auto;
  padding:2rem;
  background:#2b2b2b;
  border-radius:10px;
  box-shadow:0 0 30px #000;
}

h1 {
  text-align:center;
  color:#ff6f61;
}

.instructions {
  background:#444;
  padding:1rem;
  border-radius:6px;
  font-size:0.9rem;
  color:#ffd700;
  margin-bottom:1rem;
}

.stats {
  display:flex;
  justify-content:space-around;
  margin-bottom:1rem;
}

.text-box {
  background:#3c3c3c;
  padding:1rem;
  border-radius:6px;
  min-height:120px;
  white-space:pre-line;
}

.options {
  margin-top:1rem;
  display:flex;
  flex-direction:column;
}

button {
  margin:0.4rem 0;
  padding:0.7rem;
  border:none;
  border-radius:5px;
  background:#ff6f61;
  color:#fff;
  cursor:pointer;
  font-weight:bold;
}

button:hover { background:#ff4b3a; }

.inventory {
  margin-top:1rem;
  background:#3c3c3c;
  padding:0.5rem;
  border-radius:5px;
}

.inventory span {
  background:#ff6f61;
  padding:3px 7px;
  border-radius:3px;
  margin-right:5px;
}

.puzzle-box {
  background:#222;
  padding:1rem;
  border-radius:6px;
  margin-top:1rem;
}

input {
  padding:0.5rem;
  width:80%;
  border-radius:5px;
  border:none;
  margin-top:0.5rem;
}

.hint {
  font-size:0.85rem;
  color:#9ad1ff;
  margin-top:0.5rem;
}

.flicker {
  opacity:0.3;
}
</style>
</head>

<body>

<div class="game-container" id="container">
<h1>Lumen Office RPG</h1>

<div class="instructions">
<strong>Player Notes:</strong><br>
• Keep <strong>Sanity above 50</strong> to avoid scrambled text.<br>
• Gain <strong>Memory</strong> by solving puzzles and investigating.<br>
• High <strong>Suspicion</strong> increases risk of capture.<br>
• Puzzles always include hints — read carefully.
</div>

<div class="stats">
<div>Memory: <span id="memory">50</span></div>
<div>Suspicion: <span id="suspicion">0</span></div>
<div>Sanity: <span id="sanity">100</span></div>
</div>

<div class="inventory">Inventory: <span id="inventory"></span></div>

<div class="text-box" id="story"></div>
<div class="options" id="options"></div>

</div>

<script>
let step = 0;
let memory = 50, sanity = 100, suspicion = 0;
let inventory = [];
let secrets = ["Keycard","USB Drive","Encrypted Notes"].sort(()=>Math.random()-0.5);

function updateStats(){
  memoryEl.textContent = memory;
  sanityEl.textContent = sanity;
  suspicionEl.textContent = suspicion;
  inventoryEl.innerHTML = inventory.map(i=>`<span>${i}</span>`).join("");
}

const memoryEl = document.getElementById("memory");
const sanityEl = document.getElementById("sanity");
const suspicionEl = document.getElementById("suspicion");
const inventoryEl = document.getElementById("inventory");
const story = document.getElementById("story");
const optionsDiv = document.getElementById("options");

function flicker(){
  if(Math.random()<0.04){
    container.classList.add("flicker");
    setTimeout(()=>container.classList.remove("flicker"),120);
  }
}
setInterval(flicker,1000);

const text = [
"You wake up at your desk. The office hums softly. What do you do?",
"You check your desk. A file labeled 'Project LUMEN' catches your eye.",
"The elevator panel flickers. One button looks worn.",
"A hallway stretches into darkness.",
"You open the file. It warns: 'Memory is permission.'",
"You find surveillance monitors watching every floor.",
`You discover a ${secrets[0]}.`,
`You discover a ${secrets[1]}.`,
`You discover ${secrets[2]}.`,
"RESTRICTED DOOR",
"ENCRYPTED FILE",
"Ending: Freedom.",
"Ending: Captured.",
"Ending: Mastermind.",
"Ending: Forgotten."
];

const choices = [
[{t:"Check desk",n:1},{t:"Go to elevator",n:2},{t:"Explore hallway",n:3}],
[{t:"Open file",n:4,m:10,s:-5},{t:"Leave it",n:3,sp:5}],
[{t:"Press flickering button",n:5,sp:10,s:-5},{t:"Take stairs",n:3}],
[{t:"Enter dark room",n:5},{t:"Return",n:0}],
[{t:"Investigate monitors",n:6,m:5},{t:"Leave quietly",n:3}],
[{t:"Take items",n:6},{t:"Leave",n:3}],
[{t:"Collect secrets",n:9}],
[{},{},{}]
];

function render(){
  story.textContent = text[step];
  optionsDiv.innerHTML="";
  updateStats();

  if(choices[step]){
    choices[step].forEach(c=>{
      if(!c.t) return;
      let b=document.createElement("button");
      b.textContent=c.t;
      b.onclick=()=>choose(c);
      optionsDiv.appendChild(b);
    });
  }

  if(step===9) doorPuzzle();
  if(step===10) filePuzzle();
}

function choose(c){
  memory+=c.m||0;
  sanity+=c.s||0;
  suspicion+=c.sp||0;
  step=c.n;
  render();
}

/* ---- PUZZLES ---- */

function doorPuzzle(){
  optionsDiv.innerHTML=`
  <div class="puzzle-box">
  <strong>Door Lock Puzzle</strong><br>
  Enter the <strong>3-digit code</strong> to unlock the door.
  <div class="hint">Hint: Numbers you’ve seen repeatedly in the office environment.</div>
  <input id="doorInput" placeholder="3-digit code">
  <button onclick="checkDoor()">Submit</button>
  </div>`;
}

function checkDoor(){
  const v=document.getElementById("doorInput").value;
  if(v==="427"){
    memory+=15;
    step=13;
  } else {
    sanity-=10;
  }
  render();
}

function filePuzzle(){
  optionsDiv.innerHTML=`
  <div class="puzzle-box">
  <strong>File Decode Puzzle</strong><br>
  Decode the word <strong>LZOP</strong>.
  <div class="hint">Hint: Each letter is shifted forward in the alphabet.</div>
  <input id="fileInput" placeholder="Decoded word">
  <button onclick="checkFile()">Submit</button>
  </div>`;
}

function checkFile(){
  const v=document.getElementById("fileInput").value.toUpperCase();
  if(v==="INFO"){
    memory+=20;
    step=14;
  } else {
    sanity-=10;
  }
  render();
}

render();
</script>
</body>
</html>
